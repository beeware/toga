Some code dealing with window state transitions has been made more readable with `match`/`case` statements.
